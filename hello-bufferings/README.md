hello bufferings!
==============================

[僕の好きなコードの書き方](http://bufferings.hatenablog.com/entry/2015/05/06/000943) から始まる一連のブログを見て、
私の好きなコードの書き方をやってみようかと思ったわけです。

きっとbufferingsさんとは違うところに着地すると思う。

## 準備

とりあえず `Hello.java` はGistの初期バージョンからそのままコピー。

* https://gist.github.com/bufferings/9414995751687177e882/9e382903c42400b65cc7c0de3063c02208945bd6

他のクラスは生成に任せる。幾つかの型は推測。
`Logger#error(Exception)` を許容するAPIはcommons-loggingしか知らないのでこれにしとく。

コンパイルエラーが無くなったところで準備完了。

## テスト

我ながら雑なテストである。
今回は「リファクタリングによって壊していない」を確認したい程度なのだから、その程度で十分なのです。
それで困るわけでもないし。

準備ではコンパイルが通るところまでだったから、多少動くように中身作らないとねーってことで。
テスト通るようにDaoとかその辺実装するわけです。

でも書いてたらなんかバグっぽいの見つけちゃった。直しちゃった。てへ。
本来のレガシーコード改善ではこういうのは厳禁。動き変わっちゃいますから。
その変更がどこに波及するかわからないからレガシーコードなのですよ。
今回はリファクタリングしたいだけだからスルー。

## リファクタリング（機械的な）

テーマは「好きなコードの書き方」でしたっけ。
少なくとも元のコードは好きくないです。ネストが深い、何してるかわからん。
好きなコードにするには骨が折れるなーと思ったけど、とりあえずリファクタリング機能だけでどこまでいけるかってのをやってみた。

所要時間は25分。
個々のコミットを見て貰えばわかると思いますが、やってることは単純なものだけです。
長いと見るか短いと見るかは人それぞれだと思いますが、ずいぶん見れる形にはなったと思います。

てかこのREADME書いてる時間のほうがなげぇ。

### やったこと

* メソッド抽出
* ifの反転
* ifとelse ifのマージ
* elseの除去
* 一時変数名の変更
* スコープの変更 ※

ほぼ全ての操作がIDEの機能でできます。
練習素材としてもいいんじゃないでしょうか？

スコープの変更だけはできなかったので手作業になっていますが、比較的安全な操作だとは思います。
手作業による変更をどの程度許容するかは、状況次第といったところですかね。

## 重複の排除

メソッド抽出とかでいくらか排除できたものの、まだ目立つ重複がコインの判定。
投入と返却のそれぞれで同じものが使われているけれど、この一致は偶然ではないはず。
ということでここを共通化する。


